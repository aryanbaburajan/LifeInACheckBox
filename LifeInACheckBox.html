<!DOCTYPE html>
<html>
  <head>
    <title>LifeInACheckBox</title>
    <style type="text/css">
    	body {
    		background-color: #ffffff;
    	}

      	#day, #month, #year {
        	width: 50px;
      	}

      	.tableCheckBox {
      		padding: 0, 0, 0, 0;
      		width: 10px;
      		height: 10px;
      		border-style: solid;
      		border-color: #000000;
      		border-width: 1px;
      	}

      	td, tr, table {
      		border-collapse: collapse;
      	}

      	.checked {
      		background-color: #62d2a2;
      	}

      	.unchecked {
      		background-color: #ffffff;
      	}
    </style>
  </head>
  <body>
    <label>Date of Birth:</label>
    <input type="number" id="day">
    <input type="number" id="month">
    <input type="number" id="year">
    <button onclick="rerender()">Submit</button>
    <table id="tableBox"></table>
    <div id="piechart"></div>

	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script type="text/javascript">
      	document.body.style.zoom = "60%";
		if (localStorage.getItem("day") && localStorage.getItem("month") && localStorage.getItem("year")) {
		    document.getElementById("day").value = localStorage.getItem("day");
		    document.getElementById("month").value = localStorage.getItem("month");
		    document.getElementById("year").value = localStorage.getItem("year");
		}

		let d1 = localStorage.getItem("day");
		let m1 = localStorage.getItem("month");
		let y1 = localStorage.getItem("year");

		let d2 = new Date().getDate();
		let m2 = new Date().getMonth() + 1;
		let y2 = new Date().getFullYear();

		let week = Math.round(((y2 - y1) * 365 + (m2 - m1) * 30.417 + (d2 - d1)) / 7);

		console.log((week / 4171) * 100);
		console.log(100 - (week / 4171) * 100);

		for (let i = 1; i < 81; i++) {
		    let x = document.createElement("TR");
		    document.getElementById("tableBox").appendChild(x);
		    for (let j = 1; j < 53; j++) {
		        let y = document.createElement("TD");
		        x.appendChild(y);
		        y.setAttribute("class", "tableCheckBox unchecked");
		        if ((i*52) + j < week) {
		            y.setAttribute("class", "tableCheckBox checked");
		        }
		    }
		}

		function rerender() {
		    if (document.getElementById("tableBox")) {
		        document.getElementById("tableBox").innerHTML = "";
		    }

		    localStorage.setItem("day", document.getElementById("day").value);
		    localStorage.setItem("month", document.getElementById("month").value);
		    localStorage.setItem("year", document.getElementById("year").value);

		    let d1 = localStorage.getItem("day");
		    let m1 = localStorage.getItem("month");
		    let y1 = localStorage.getItem("year");

		    let d2 = new Date().getDate();
		    let m2 = new Date().getMonth() + 1;
		    let y2 = new Date().getFullYear();

		    let week = Math.round(((y2 - y1) * 365 + (m2 - m1) * 30.417 + (d2 - d1)) / 7);

		    console.log((week / 4171) * 100);
		    console.log(100 - (week / 4171) * 100);

		    for (let i = 1; i < 81; i++) {
		    let x = document.createElement("TR");
		    document.getElementById("tableBox").appendChild(x);
		    for (let j = 1; j < 53; j++) {
		        let y = document.createElement("TD");
		        x.appendChild(y);
		        y.setAttribute("class", "tableCheckBox unchecked");
		        if ((i*52) + j < week) {
		            y.setAttribute("class", "tableCheckBox checked");
		        }
		    }
		}
		}
    </script>
  </body>
</html>